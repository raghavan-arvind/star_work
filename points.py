import sys
import atexit
import networkx as nx

coords = {'r6': (32.1917800903, 115.396934509), 'i2': (48.1107788086, 105.988296509), 'i4': (17.42395401, 105.209571838), 'd1': (6.76491165161, 112.757469177), 'r13': (45.0136451721, 102.41947937), 'd20': (23.1707439423, 105.489807129), 'i6': (14.3663759232, 113.519447327), 'r2': (8.96481704712, 115.404937744), 'i3': (33.9062576294, 105.275985718), 'd3': (19.6334762573, 112.373733521), 'd7': (29.6615200043, 112.434532166), 'd21': (21.897064209, 105.102661133), 'd17': (39.4887695312, 105.35836792), 'd10': (40.969543457, 112.495727539), 'r16': (29.9390983582, 109.440086365), 'r10': (45.0729446411, 108.629150391), 'd23': (10.3303451538, 105.190734863), 'r26': (8.9367389679, 101.593757629), 'r11': (41.097858429, 108.535583496), 'd4': (21.2724895477, 112.182777405), 'd2': (7.84000778198, 112.361663818), 'd12': (44.9742736816, 112.654785156), 'r27': (9.1826210022, 108.222724915), 'r28': (39.008392334, 114.981956482), 'r4': (24.3392028809, 115.429176331), 'd15': (51.3042526245, 105.352783203), 'd22': (20.9218959808, 105.039749146), 'r3': (20.504863739, 115.55393219), 'r5': (28.5052490234, 115.402694702), 'd8': (30.8963489532, 112.769294739), 'd18': (33.4266395569, 102.005897522), 'r1': (5.29522514343, 115.758872986), 'd19': (29.7961959839, 105.645126343), 'r21': (24.374458313, 101.63004303), 'i5': (14.7835083008, 104.688957214), 'r9': (52.9659118652, 115.366699219), 'r22': (20.5140609741, 102.019271851), 'r14': (36.7606925964, 108.823013306), 'r15': (38.2078781128, 100.458351135), 'r24': (14.609085083, 108.930099487), 'd24': (32.7120475769, 111.065345764), 'd11': (43.5953216553, 112.446990967), 'd14': (48.2460250854, 112.334037781), 'r25': (14.2544584274, 116.043502808), 'r19': (32.3290367126, 101.768623352), 'r12': (54.8262786865, 106.72668457), 'd5': (21.9395313263, 112.771110535), 'r20': (27.9855327606, 101.263656616), 'r17': (24.0002746582, 108.502052307), 'd13': (45.9205169678, 112.526473999), 'r8': (47.2909011841, 115.680419922), 'r7': (43.5528831482, 115.033187866), 'd25': (27.1601924896, 111.037071228), 'i1': (10.9330873489, 112.724777222), 'd6': (23.1813697815, 112.850349426), 'd9': (39.5764350891, 112.495727539), 'r23': (15.3893146515, 102.381370544), 'd16': (41.3706283569, 104.915588379), 'r18': (18.7453746796, 109.395431519)}

adj = {'d2': {'r27', 'i1', 'd1', 'r2'}, 'd19': {'r20', 'r19', 'd20', 'i3'}, 'd23': {'r24', 'r23', 'i5', 'r27', 'r26'}, 'r23': {'i4', 'i5', 'd23'}, 'r12': {'r9', 'd15'}, 'd17': {'r14', 'd16', 'i3'}, 'r16': {'d25', 'd24'}, 'd22': {'i4', 'd21', 'd4', 'r17'}, 'r25': {'r24', 'd3', 'i6', 'i1'}, 'r4': {'d6'}, 'i4': {'r24', 'r23', 'i5', 'd22'}, 'i1': {'r24', 'r27', 'i6', 'd2', 'r25'}, 'd21': {'r22', 'd22', 'd20'}, 'd6': {'d7', 'd5', 'r4'}, 'r9': {'d14', 'r12'}, 'd16': {'i2', 'r13', 'r15', 'd17'}, 'r15': {'d16', 'd18'}, 'd24': {'r14', 'r16', 'd25'}, 'r7': {'d12'}, 'i2': {'d16', 'd14', 'r13', 'd15'}, 'd13': {'r8', 'd14', 'd12'}, 'r2': {'d2'}, 'd1': {'d2', 'r1'}, 'd7': {'r5', 'd8', 'd6'}, 'd8': {'r28', 'd7', 'd9', 'r6'}, 'i6': {'r24', 'd3', 'i1', 'r25'}, 'r3': {'d5'}, 'i3': {'r19', 'd19', 'd18', 'd17'}, 'r20': {'d19'}, 'r24': {'i4', 'i1', 'i5', 'd23', 'd3', 'r25', 'i6'}, 'r5': {'d7'}, 'd9': {'r28', 'r14', 'd8', 'd10'}, 'r11': {'d10'}, 'r22': {'d21'}, 'd3': {'d4', 'i6', 'r18', 'r25', 'r24'}, 'r6': {'d8'}, 'r1': {'d1'}, 'r21': {'d20'}, 'd14': {'i2', 'd13', 'r9'}, 'd11': {'r10', 'd12', 'd10'}, 'r27': {'d2', 'i1', 'd23'}, 'r19': {'i3', 'd19', 'd18'}, 'r17': {'d4', 'd22', 'd25'}, 'r8': {'d13'}, 'r10': {'d11'}, 'i5': {'i4', 'r23', 'd23', 'r24'}, 'd25': {'r16', 'd24', 'r17'}, 'd20': {'d19', 'd21', 'r21'}, 'r26': {'d23'}, 'd15': {'i2', 'r12'}, 'r14': {'d24', 'd9', 'd17'}, 'd5': {'r3', 'd4', 'd6'}, 'd4': {'d3', 'd22', 'd5', 'r17'}, 'r13': {'i2', 'd16'}, 'r28': {'d8', 'd9', 'd10'}, 'r18': {'d3'}, 'd18': {'r19', 'r15', 'i3'}, 'd12': {'d13', 'd11', 'r7'}, 'd10': {'r28', 'r11', 'd11', 'd9'}}


dist = lambda p1, p2: ((coords[p1][0] - coords[p2][0]) ** 2 + (coords[p1][1] - coords[p2][1]) ** 2) ** 0.5
G = nx.Graph()
G.add_coords_from(n for n in coords)
G.add_weighted_edges_from((x, y, dist(x, y)) for x in adj for y in adj[x])
print(nx.shortest_path(G, 'r1', 'r23',weight="weight"))
